(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04eeb378"],{1799:function(e,t,o){},2749:function(e,t,o){},"2d3a":function(e,t,o){"use strict";o("2749")},"996d":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"readdoc-box",style:{overflow:e.loadingShow?"hidden":""}},[o("div",{staticStyle:{width:"100%",height:"60px"}}),o("div",{staticStyle:{margin:"0px auto"},style:{width:e.iframeWidth}},[o("iframe",{ref:"pdf",style:{minHeight:e.screenHeight+"px",width:e.iframeWidth},attrs:{id:"aliyunPreview",src:"/third-party/pdfjs/web/viewer.html?file="+e.url+"&page="+e.pdfPage,frameborder:"0"}})]),o("div",{staticClass:"menu-box",style:{right:e.menuRight}},[o("div",{staticClass:"previous-page",on:{click:e.prePage}},[o("i",{staticClass:"el-icon-arrow-up"})]),o("div",{staticClass:"next-page",on:{click:e.nextPage}},[o("i",{staticClass:"el-icon-arrow-down"})])]),o("div",{staticStyle:{width:"100%",height:"55px"}}),e.loadingShow?o("div",{staticClass:"preloader-area"},[e._m(0)]):e._e(),o("back-to-top",{on:{backToTop:e.backToTop}}),o("pdf-menu")],1)},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"loader"},[o("div",{staticClass:"largeBox"}),o("div",{staticClass:"smallBox"})])}],a=(o("1084"),o("159a"),o("ac67"),o("246f"),o("4890"),o("1bc7"),o("32ea"),o("80ee")),i=(o("fc02"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"top-box",style:{top:e.menuTop+"px"},on:{mouseleave:e.hiddenMenu}},[r("div",{staticClass:"content-box"},[r("div",{staticClass:"title"},[r("img",{staticClass:"logo",attrs:{src:o("d8af"),alt:""}}),r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/course-details/ebook-detail?courseUuid="+e.$route.query.courseUuid}}},[e._v(e._s(e.$route.query.courseName))]),r("el-breadcrumb-item",[e._v(e._s(e.chapterList[e.chapterPlayIndex[0]].catalogName))])],1)],1)])]),r("div",{staticClass:"top-trigger",style:{top:e.topTrigger+"px"},on:{mouseenter:e.showMenu}})])}),s=[],c=o("c762"),u={data:function(){return{menuTop:0,footBottom:0,topTrigger:-60,bottomTrigger:-60,listBoxHeight:0,showPopover:!1,chapterList:[{}],chineseNumber:["一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十"],chapterPlayIndex:[0,0]}},mounted:function(){window.addEventListener("scroll",this.windowScroll),this.listBoxHeight=window.outerHeight-300,this.getChapterList()},methods:{windowScroll:function(){var e=this,t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;0==t?this.showMenu():0!=this.menuTop||this.showPopover||setTimeout((function(){e.menuTop=-60,e.footBottom=-60,e.topTrigger=0,e.bottomTrigger=0}),500)},getChapterList:function(){var e=this,t={courseUuid:this.$route.query.courseUuid};Object(c["h"])(t).then((function(t){"true"==t.success&&(e.chapterList=t.data.courseCatalog,t.data.courseCatalog.forEach((function(t,o){t.children.forEach((function(t,r){e.$route.query.resourcesUuid==t.uuid&&(e.chapterPlayIndex=[o,r])}))})))}))},preChapter:function(){0==this.chapterPlayIndex[0]&&this.$message.info("这是本作品的第一章，没有上一章呦~")},nextChapter:function(){this.chapterPlayIndex[0]==this.chapterList.length-1&&this.$message.info("你已进入书末页，没有下一章呦~")},closeChapter:function(){this.$refs.chapter.doClose()},showMenu:function(){this.menuTop=0,this.footBottom=0,this.topTrigger=-60,this.bottomTrigger=-60},hiddenMenu:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;console.log(this.showPopover),0==e||this.showPopover||(this.menuTop=-60,this.footBottom=-60,this.topTrigger=0,this.bottomTrigger=0)}}},l=u,d=(o("2d3a"),o("cba8")),m=Object(d["a"])(l,i,s,!1,null,"7d15cae2",null),p=m.exports,f=o("9747");function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){Object(a["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var b=null,v={data:function(){return{url:"",screenHeight:0,iframeWidth:"100%",pdfPage:1,iframeInterval:null,pageHeight:0,pdfRows:0,paramPage:1,loadingShow:!1,recordParam:{courseLearningUuid:"",courseName:"",courseNum:"",courseUuid:"",learnTime:"",lessonSign:"",lessonStatus:"",lessonType:"",lessonUuid:"",recordType:"",resourceUuid:"",taskUuid:"",timeLong:""}}},components:{pdfMenu:p,backToTop:f["a"]},computed:{menuRight:function(){if("100%"==this.iframeWidth)return"0px";var e=(window.innerWidth-this.iframeWidth.split("px")[0])/2-63+"px";return e}},mounted:function(){this.loadingShow=!0,this.countdown(),this.screenHeight=document.documentElement.clientHeight-36;var e=this.$refs.pdf,t=this;window.onresize=function(){e.attachEvent?e.attachEvent("onload",(function(){t.iframeOnload(e)})):e.onload=function(){t.iframeOnload(e)}},e.attachEvent?e.attachEvent("onload",(function(){t.iframeOnload(e)})):e.onload=function(){t.iframeOnload(e)},window.addEventListener("scroll",this.windowScroll)},destroyed:function(){clearInterval(b)},methods:{prePage:function(){console.log(this.paramPage),console.log("//////////////////////////"),1!=this.paramPage?this.turnPage(this.paramPage-1,"pre"):clearInterval(this.scrollToptimer)},nextPage:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return e+window.innerHeight>this.screenHeight||this.paramPage==this.pdfRows?(console.log("看完了"),void clearInterval(this.scrollToptimer)):void this.turnPage(this.paramPage+1,"next")},windowScroll:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.paramPage=0==e?1:Math.ceil((e+60)/this.pageHeight)+1},iframeOnload:function(e){var t=this;if(console.log(e),e){var o=e.contentWindow;this.iframeInterval&&clearInterval(this.iframeInterval),this.iframeInterval=setInterval((function(){if(null==o.PDFViewerApplication.pdfDocument)console.info("Loading...");else{clearInterval(t.iframeInterval);var e=o.document.getElementById("viewer").offsetHeight,r=0,n=o.document.getElementsByClassName("page");n.length>0?(r=n[0].offsetWidth,t.pageHeight=n[0].offsetHeight):t.iframeOnload(),t.pdfRows=o.document.getElementsByClassName("page").length,t.iframeWidth=r+"px",t.screenHeight=e+33-32,setTimeout((function(){t.turnPage(t.pdfPage,"jump"),t.loadingShow=!1}),500),console.info("Load Success...")}}),100)}else{var r=this.$refs.pdf;this.iframeOnload(r)}},turnPage:function(e,t){var o=this;console.log("--------------跳页"),clearInterval(this.scrollToptimer),this.scrollToptimer=setInterval((function(){if("pre"==t){var r=document.body.scrollTop||document.documentElement.scrollTop,n=o.pageHeight,a=n/4;0!=document.body.scrollTop?document.body.scrollTop-=a:document.documentElement.scrollTop-=a;var i=r-((e-1)*o.pageHeight-60);i<a&&(0!=document.body.scrollTop?document.body.scrollTop-=i:document.documentElement.scrollTop-=i,clearInterval(o.scrollToptimer))}else if("next"==t){r=document.body.scrollTop||document.documentElement.scrollTop,n=o.pageHeight,a=n/4;0!=document.body.scrollTop?document.body.scrollTop+=a:document.documentElement.scrollTop+=a;i=(e-1)*o.pageHeight-60-(r+o.pageHeight);i<a&&(setTimeout((function(){0!=document.body.scrollTop?document.body.scrollTop+=i+o.pageHeight/3:document.documentElement.scrollTop+=i+o.pageHeight/3}),50),clearInterval(o.scrollToptimer))}else window.scrollTo(0,(e-1)*o.pageHeight-60),clearInterval(o.scrollToptimer)}),50)},countdown:function(){var e=this;Object(c["n"])({catalogUuid:this.$route.query.resourcesUuid}).then((function(t){"true"==t.success&&(console.log(e.$route.query.courseUuid),clearInterval(b),b=setInterval((function(){e.recordProgress()}),1e4),e.url=t.data.courseResource.aliyunDocCloud,e.pdfPage=null!=t.data.courseLearning[0].lessonSign?t.data.courseLearning[0].lessonSign:1,e.paramPage=null!=t.data.courseLearning[0].lessonSign?t.data.courseLearning[0].lessonSign:1,localStorage.setItem("page","1"),e.recordParam.courseUuid=e.$route.query.courseUuid,e.recordParam.courseName=e.$route.query.courseName,e.recordParam.lessonUuid=t.data.courseLearning[0].uuid,e.recordParam.courseLearningUuid=t.data.courseLearning[0].uuid,e.recordParam.lessonSign=t.data.courseLearning[0].lessonSign,e.recordParam.lessonType=t.data.courseLearning[0].lessonType,e.recordParam.recordType=t.data.courseLearning[0].recordType,e.recordParam.courseNum=t.data.courseLearning[0].courseNum,e.recordParam.timeLong=t.data.courseCatalog.planTime,e.recordParam.learnTime=e.pdfPage,e.recordParam.resourceUuid=t.data.courseResource.uuid,e.recordParam.lessonStatus="")}))},recordProgress:function(){var e=this,t=this.paramPage,o=g({},this.recordParam);o.lessonSign=t,o.learnTime=t,o.timeLong=localStorage.getItem("totalNumber"),o.timeLong&&Object(c["y"])(o).then((function(t){"true"!=t.success&&e.$Message.error("服务器异常，请稍后在进行学习")}))},backToTop:function(){var e=this;this.scrollToptimer=setInterval((function(){console.log("定时循环回到顶部");var t=document.body.scrollTop||document.documentElement.scrollTop,o=t/4;0!=document.body.scrollTop?document.body.scrollTop-=o:document.documentElement.scrollTop-=o,0==t&&clearInterval(e.scrollToptimer)}),30)}}},y=v,T=(o("be15"),Object(d["a"])(y,r,n,!1,null,"0ba3b29c",null));t["default"]=T.exports},be15:function(e,t,o){"use strict";o("1799")},c762:function(e,t,o){"use strict";o.d(t,"i",(function(){return n})),o.d(t,"h",(function(){return a})),o.d(t,"j",(function(){return i})),o.d(t,"m",(function(){return s})),o.d(t,"f",(function(){return c})),o.d(t,"o",(function(){return u})),o.d(t,"q",(function(){return l})),o.d(t,"k",(function(){return d})),o.d(t,"u",(function(){return m})),o.d(t,"l",(function(){return p})),o.d(t,"b",(function(){return f})),o.d(t,"s",(function(){return h})),o.d(t,"y",(function(){return g})),o.d(t,"t",(function(){return b})),o.d(t,"n",(function(){return v})),o.d(t,"x",(function(){return y})),o.d(t,"a",(function(){return T})),o.d(t,"c",(function(){return w})),o.d(t,"v",(function(){return O})),o.d(t,"r",(function(){return P})),o.d(t,"p",(function(){return C})),o.d(t,"g",(function(){return j})),o.d(t,"d",(function(){return L})),o.d(t,"w",(function(){return S})),o.d(t,"e",(function(){return x}));var r=o("b6bd");function n(e){return Object(r["a"])({url:"/meilanopenapi/frontCourse/getCourseDetailFront",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/meilanopenapi/frontCourse/getCourseDetailForViewCourse",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/meilanopenapi/courseDiscuss/getCourseDiscussList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/meilanopenapi/frontCourse/getCourseRecommendFront",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/meilanopenapi/company/getCompanyDetailFront",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/meilanopenapi/seriescourse/getSeriesCourseByCourse",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/meilanopenapi/seriescourse/getSeriesSubCourseCatalogBySeriesCourse",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/meilanopenapi/courseLearnRecommend/getCourseLearnRecommendList",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/meilanfrontapi/courseDiscuss/saveCourseDiscuss",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/meilanfrontapi/frontCourse/getCourseRecommendFront",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/meilanblock/courseOrder/generateCourseOrder",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/meilanblock/courseOrder/payCourseOrder",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/meilanfrontapi/courseLearning/startLearn",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/meilanfrontapi/classLearning/saveClassLearningTime",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/meilanfrontapi/frontCourse/getPeriodDetailForViewCourse",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/meilanfrontapi/classSchedule/scheduleDetail",method:"post",data:e})}function T(e){return Object(r["a"])({url:"/meilanfrontapi/classLearning/startLearn",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/meilanfrontapi/aliyunVOD/getAliyunVodStsNoToken",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/meilanfrontapi/courseLearningStatistics/saveCourseLearningTime",method:"post",data:e})}function P(e){return Object(r["a"])({url:"/meilanopenapi/seriescourse/getSeriescourseDetail",method:"post",data:e})}function C(e){return Object(r["a"])({url:"/meilanopenapi/seriescourselearnrecommend/getSeriesCourseLearnRecommendList",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/meilanopenapi/company/getCompanyDetailFrontByUuid",method:"post",data:e})}function L(e){return Object(r["a"])({url:"/meilanopenapi/hskyctbook/getBookDetail",method:"post",data:e})}function S(e){return Object(r["a"])({url:"/meilanfrontapi/hskyctbookorder/saveOrder",method:"post",data:e})}function x(e){return Object(r["a"])({url:"/meilanopenapi/hskyctbook/getBookList",method:"post",data:e})}},d8af:function(e,t,o){e.exports=o.p+"img/logo.f8a3adc8.png"}}]);